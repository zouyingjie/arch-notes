<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta property="og:url" content="https://abc/common-design/api-design/webapi.html"><meta property="og:site_name" content="架构笔记"><meta property="og:title" content="Web API 路径设计哪家强"><meta property="og:description" content="Web API 路径设计哪家强 本文档主要比较一下各家API的URL路径设计，通过学习各家API的URL路径设计，可以更好的理解REST API的设计。 Google API 文档地址：https://developers.google.com/apis-explorer/#p/ YouTube Data API API 文档地址：YouTube Da..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-10-31T09:08:49.000Z"><meta property="article:modified_time" content="2024-10-31T09:08:49.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Web API 路径设计哪家强","image":[""],"dateModified":"2024-10-31T09:08:49.000Z","author":[]}</script><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><title>Web API 路径设计哪家强 | 架构笔记</title><meta name="description" content="Web API 路径设计哪家强 本文档主要比较一下各家API的URL路径设计，通过学习各家API的URL路径设计，可以更好的理解REST API的设计。 Google API 文档地址：https://developers.google.com/apis-explorer/#p/ YouTube Data API API 文档地址：YouTube Da...">
    <link rel="preload" href="/assets/style-BGiMcUT_.css" as="style"><link rel="stylesheet" href="/assets/style-BGiMcUT_.css">
    <link rel="modulepreload" href="/assets/app-D-gFUe8_.js"><link rel="modulepreload" href="/assets/webapi.html-B63V8btk.js">
    <link rel="prefetch" href="/assets/index.html-Bm36x10y.js" as="script"><link rel="prefetch" href="/assets/SUMMARY.html-9_HYDJlb.js" as="script"><link rel="prefetch" href="/assets/get-started.html-DlfTTkCw.js" as="script"><link rel="prefetch" href="/assets/01.kubernetes_roadmap.html-DzwBXUfX.js" as="script"><link rel="prefetch" href="/assets/02.kubernetes_pod.html-BiskKWsE.js" as="script"><link rel="prefetch" href="/assets/rest.html-BlxYxHOU.js" as="script"><link rel="prefetch" href="/assets/swagger.html-BZSD_kNt.js" as="script"><link rel="prefetch" href="/assets/spring-boot-unit-testing.html-8CYez3q9.js" as="script"><link rel="prefetch" href="/assets/unit-test.html-DMX3vw24.js" as="script"><link rel="prefetch" href="/assets/404.html-Bdc787EN.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/images/microservices-logo.svg" alt="架构笔记"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">架构笔记</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://zouyingjie.github.io" aria-label="关于我" rel="noopener noreferrer" target="_blank"><!---->关于我<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/zouyingjie/arch-notes" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://zouyingjie.github.io" aria-label="关于我" rel="noopener noreferrer" target="_blank"><!---->关于我<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/zouyingjie/arch-notes" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/common-design/" aria-label="通用设计"><!---->通用设计<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item active">API 设计 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/common-design/api-design/rest.html" aria-label="REST API 设计最佳实践"><!---->REST API 设计最佳实践<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/common-design/api-design/webapi.html" aria-label="Web API 路径设计哪家强"><!---->Web API 路径设计哪家强<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/common-design/api-design/swagger.html" aria-label="实践：Spring Boot 集成 Swagger"><!---->实践：Spring Boot 集成 Swagger<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item">软件测试 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/common-design/software-testing/unit-test.html" aria-label="单元测试那些事"><!---->单元测试那些事<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/kubernetes/" aria-label="Kubernetes"><!---->Kubernetes<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/kubernetes/01.kubernetes_roadmap.html" aria-label="Kubernetes 架构概览"><!---->Kubernetes 架构概览<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/kubernetes/02.kubernetes_pod.html" aria-label="Pod 那些事"><!---->Pod 那些事<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="web-api-路径设计哪家强" tabindex="-1">Web API 路径设计哪家强</h1><p>本文档主要比较一下各家API的URL路径设计，通过学习各家API的URL路径设计，可以更好的理解REST API的设计。</p><h2 id="google" tabindex="-1">Google</h2><ul><li>API 文档地址：<a href="https://developers.google.com/apis-explorer/#p/" target="_blank" rel="noopener noreferrer">https://developers.google.com/apis-explorer/#p/</a></li></ul><h3 id="youtube-data-api" tabindex="-1">YouTube Data API</h3><ul><li>API 文档地址：<a href="https://developers.google.com/apis-explorer/#p/youtube/v3/" target="_blank" rel="noopener noreferrer">YouTube Data API</a></li><li>API 前缀：<code>https://www.googleapis.com/youtube/v3</code></li></ul><p><strong>播放列表 API</strong></p><ul><li>创建播放列表：<code>POST /playlists</code></li><li>查询播放列表集合：<code>GET /playlists</code></li><li>更新播放列表：<code>PUT /playlists</code></li><li>删除播放列表：<code>DELETE /playlists</code></li></ul><p><strong>视频 API</strong></p><ul><li>上传视频：<code>POST /videos</code></li><li>查询列表：<code>GET /videos</code></li><li>更新视频信息：<code>PUT /videos</code></li><li>删除视频：<code>DELETE /videos</code></li><li>为视频评分：<code>POST /videos/rate</code></li><li>获取视频评分：<code>GET /videos/getRating</code></li></ul><h3 id="calendar-api" tabindex="-1">Calendar API</h3><ul><li>API 文档地址：<a href="https://developers.google.com/apis-explorer/#p/calendar/v3/" target="_blank" rel="noopener noreferrer">Calendar API</a></li><li>API 前缀：<code>https://www.googleapis.com/calendar/v3</code></li></ul><p><strong>日历 API</strong></p><ul><li>创建辅助日历：<code>POST /calendars</code></li><li>查询日历：<code>GET /calendars/{calendarId}</code></li><li>更新/补丁日历：<code>PUT/PATCH /calendars/{calendarId}</code></li><li>删除服务日历：<code>DELETE /calendars/{calendarId}</code></li><li>清除主日历：<code>POST /calendars/calendarId/clear</code></li></ul><p><strong>事件 API</strong></p><ul><li>创建事件：<code>POST /calendars/calendarId/events</code></li><li>查询日历中的事件：<code>GET /calendars/calendarId/events</code></li><li>查询单个事件：<code>GET /calendars/calendarId/events/eventId</code></li><li>更新事件：``PUT /calendars/calendarId/events/eventId`</li><li>删除事件：<code>DELETE /calendars/calendarId/events/eventId</code></li><li>移动事件：<code>POST  /calendars/calendarId/events/eventId/move</code></li></ul><h3 id="gmail-api" tabindex="-1">Gmail API</h3><ul><li>API 文档地址：<a href="https://developers.google.com/apis-explorer/#p/gmail/v1/" target="_blank" rel="noopener noreferrer">Gmail API</a></li><li>API 前缀：<code>https://gmail.googleapis.com</code></li></ul><p><strong>标签 API</strong></p><ul><li>创建标签：<code>POST /gmail/v1/users/{userId}/labels</code></li><li>查询标签列表：<code>GET /gmail/v1/users/{userId}/labels</code></li><li>获取指定标签：<code>GET /gmail/v1/users/{userId}/labels/{id}</code></li><li>更新标签：<code>PUT /gmail/v1/users/{userId}/labels/{id}</code></li><li>删除标签：<code>DELETE /gmail/v1/users/{userId}/labels/{id}</code></li></ul><p><strong>消息 API</strong></p><ul><li>发送消息：<code>POST /gmail/v1/users/{userId}/messages/send</code></li><li>查询消息列表：<code>GET /gmail/v1/users/{userId}/messages</code></li><li>获取指定消息：<code>GET /gmail/v1/users/{userId}/messages/{id}</code></li><li>删除消息：<code>DELETE /gmail/v1/users/{userId}/messages/{id}</code></li><li>修改邮件标签：<code>POST /gmail/v1/users/{userId}/messages/{id}/modify</code></li><li>批量修改邮件标签：<code>POST /gmail/v1/users/{userId}/messages/batchModify</code></li><li>批量删除邮件：<code>POST /gmail/v1/users/{userId}/messages/batchDelete</code></li></ul><p>批量修改和批量删除的操作 API 是 <code>POST</code> 方法，略违和。</p><h3 id="观察结果" tabindex="-1">观察结果</h3><ol><li><p>结构基本为：<code>/ product_line / version / {namespace} / resource / {resourceId} / action</code></p><ul><li>product_line：产品线，区分不同产品，比如 gmail、calendar、adsense</li><li>version：版本，区分不同版本，比如 v1、v2</li><li>namespace：命名空间（可选）。可以用来帮助组织区分 API，做不同的访问控制等处理。</li><li>resource：资源，比如 gmail 下的 messages、labels，使用名词。</li><li>resourceId：资源ID（可选），比如 gmail 下的 messageId</li><li>action：动作，对资源进行的操作， 使用动词。</li></ul></li><li><p>基本使用同一个域名 <code>www.googleapis.com</code>，当然也有例外，比如 Gmail API 使用 <code>https://gmail.googleapis.com</code>。</p></li><li><p>使用名词表示资源，命名使用复数。</p></li><li><p>使用动词或者动词短语表示操作（action）。</p></li><li><p>对于多个单词的标识符使用驼峰命名。</p></li><li><p>YouTube API 和 Calendar API 对 resourceId 的传参处理不一样。YouTube API 是放在 URL query 或者 body中，而 Calendar API 是放在 URL path 中。（PS：我个人工作中更多的使用 Calendar API 的这种处理方式）</p></li></ol><h2 id="paypal" tabindex="-1">PayPal</h2><ul><li>API 文档地址：<a href="https://developer.paypal.com/docs/api/" target="_blank" rel="noopener noreferrer">PayPal API</a></li><li>API 前缀：<code>https://api.paypal.com</code></li></ul><p><strong>API 示例</strong></p><ul><li><p>查询授权：<code>GET /v2/payments/authorizations/{authorization_id}</code></p></li><li><p>创建订单：<code>POST /v2/checkout/orders</code></p></li><li><p>更新订单：<code>PATCH /v2/checkout/orders/{order_id}</code></p></li><li><p>查询订单：<code>GET /v2/checkout/orders/{order_id}</code></p></li><li><p>创建发票：<code>POST /v2/invoicing/invoices</code></p></li><li><p>发送发票：<code>POST /v2/invoicing/invoices/{invoice_id}/send</code></p></li><li><p>查询发票列表：<code>GET /v2/invoicing/invoices</code></p></li><li><p>查询发票：<code>GET /v2/invoicing/invoices/{invoice_id}</code></p></li><li><p>删除发票：<code>DELETE /v2/invoicing/invoices/{invoice_id}</code></p></li><li><p>删除外部支付：<code>DELETE /v2/invoicing/invoices/{invoice_id}/payments/{transaction_id}</code></p></li><li><p>生成二维码：<code>POST /v2/invoicing/invoices/{invoice_id}/generate-qr-code</code></p></li></ul><h3 id="观察结果-1" tabindex="-1">观察结果</h3><ul><li>域名： 生产 <code>https://api.paypal.com</code>；沙盒 <code>https://api-m.sandbox.paypal.com</code></li><li>结构：<code>/ version / namespace / resource / {resourceId} / action</code></li><li>PayPal API 的结构相对比较干净统一</li><li>资源命名使用复数</li><li>使用动词或者动词短语表示操作（action）</li><li>使用中划线 <code>-</code> 作为分隔符</li></ul><h2 id="aws" tabindex="-1">AWS</h2><ul><li>API 文档地址：<a href="https://docs.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS API</a></li></ul><p>关于域名，AWS使用了一种完全不一样的方案。不同的产品线和不同的地区（region）会有不一样的域名。</p><p><strong>S3 域名</strong></p><p>参考文档：<a href="https://docs.aws.amazon.com/general/latest/gr/s3.html" target="_blank" rel="noopener noreferrer">S3 域名</a></p><ul><li>美国东部 (弗吉尼亚北部)：<code>s3.us-east-1.amazonaws.com</code></li><li>亚太区域 (香港)：<code>s3.ap-east-1.amazonaws.com</code></li><li>亚太区域 (东京)：<code>s3.ap-northeast-1.amazonaws.com</code></li></ul><p><strong>EC2 域名</strong></p><p>参考文档：<a href="https://docs.aws.amazon.com/general/latest/gr/ec2-service.html" target="_blank" rel="noopener noreferrer">EC2 域名</a></p><ul><li>美国东部 (弗吉尼亚北部)：<code>ec2.us-east-1.amazonaws.com</code></li><li>亚太区域 (香港)：<code>ec2.ap-east-1.amazonaws.com</code></li></ul><p>基本上来说，格式是：<code>product_name.regions_name.amazonaws.com/?Action=Function</code></p><p><strong>API 示例</strong></p><ul><li>查询实例：<code> /ec2.us-east-1.amazonaws.com/?Action=DescribeInstances</code></li><li>启动实例：<code>https://ec2.amazonaws.com/?Action=StartInstances</code></li><li>创建 VPC：<code> /ec2.us-east-1.amazonaws.com/?Action=CreateVpc</code></li><li>创建 Volume：<code> /ec2.us-east-1.amazonaws.com/?Action=CreateVolume</code></li></ul><h2 id="github" tabindex="-1">Github</h2><ul><li>API 文档地址：<a href="https://developer.github.com/v3/" target="_blank" rel="noopener noreferrer">Github API</a></li><li>API 域名：<code>https://api.github.com</code></li></ul><p><strong>API 示例</strong></p><ul><li>取所有 repo：<code>GET /orgs/{org}/repos</code></li><li>取特定用户名的repo：<code>/repos/{owner}/{repo}</code></li><li>取某个仓库所有的PR：<code>GET /repos/{owner}/{repo}/pulls</code></li><li>创建 PR：<code>POST /repos/{owner}/{repo}/pulls</code></li><li>查询 PR：<code>GET /repos/{owner}/{repo}/pulls/{pull_number}</code></li><li>更新 PR：<code>PATCH /repos/{owner}/{repo}/pulls/{pull_number}</code></li><li>Merge PR：<code>PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge</code></li><li>取自己的issue：<code>GET /user/issues</code></li><li>取某个repo下的issue：<code>GET /repos/{owner}/{repo}/issues</code></li><li>取用户：<code>GET /users/{username}</code></li><li>取组织下的所有的项目：<code>GET /orgs/{org}/projects</code></li></ul><h3 id="观察结果-2" tabindex="-1">观察结果</h3><ol><li>结构：<code>/resource/ {id} / resource</code></li><li>Github的API没有版本号，也没有namespace，直接就是 resource 开头。</li><li>URL 就是在不同的 resource 下进行组合和 join。</li></ol><h2 id="dropbox" tabindex="-1">Dropbox</h2><ul><li>API 文档地址：<a href="https://www.dropbox.com/developers/documentation/http/overview" target="_blank" rel="noopener noreferrer">Dropbox API</a></li><li>API 域名：<code>https://api.dropboxapi.com</code></li></ul><p><strong>API 示例</strong></p><ul><li><p><code>POST /2/file_properties/templates/add_for_user</code></p></li><li><p><code>POST /2/file_properties/templates/get_for_user</code></p></li><li><p><code>POST /2/file_properties/templates/remove_for_user</code></p></li><li><p><code>POST /2/file_properties/templates/update_for_user</code></p></li><li><p><code>POST /2/file_requests/create</code></p></li><li><p><code>POST /2/files/create_folder_v2</code></p></li><li><p><code>POST /2/users/get_account_batch</code></p></li><li><p><code>POST /2/paper/docs/list</code></p></li></ul><h3 id="观察结果-3" tabindex="-1">观察结果</h3><ol><li><p>结构：<code>/version / resource / actions</code></p></li><li><p>Dropbox 的 API 是在resource 上建各种函数。除了有个总版本，函数上还可以有版本，比如 <code>/2/files/create_folder_v2</code>。</p></li><li><p><strong>请求方法 POST 一把梭！</strong></p></li><li><p>对于多个单词的 action，使用了下划线 <code>_</code> 作为分隔符。关于下划线，在最初的 RFC1738 中规定不合法，但是，RFC1738 被 RFC2396更新了，RFC 2396 允许使用下划线为“unreserved character”，而2015年的时候 RFC 3986（URI现代标准） 更新了 RFC 2396，继续将下划线归类为非保留字符，可以在以下组件中可以直接使用：</p></li></ol><ul><li>path</li><li>query</li><li>fragment</li></ul><p>以下是 <a href="https://datatracker.ietf.org/doc/html/rfc3986#section-2.3" target="_blank" rel="noopener noreferrer">RFC 3986</a> 中的相关描述：</p><blockquote><p>Characters that are allowed in a URI but do not have a reserved purpose are called unreserved. These include uppercase and lowercase letters, decimal digits, hyphen, period, underscore, and tilde.</p><p>unreserved = ALPHA / DIGIT / &quot;-&quot; / &quot;.&quot; / &quot;_&quot; / &quot;~&quot;</p></blockquote><h2 id="twitter" tabindex="-1">Twitter</h2><ul><li>API 文档地址：<a href="https://developer.twitter.com/en/docs/api-reference-index" target="_blank" rel="noopener noreferrer">Twitter API</a></li><li>API 域名：api.twitter.com/(普通api)  ads-api.twitter.com(广告用)</li></ul><p><strong>API 示例</strong></p><ul><li><p>获取粉丝列表：<code>GET /2/users/:id/followers</code></p></li><li><p>获取正在关注列表：<code>GET /2/users/:id/following</code></p></li><li><p>关注用户：<code>POST /2/users/:id/following</code></p></li><li><p>取消关注：<code>DELETE /2/users/:source_user_id/following/:target_user_id</code></p></li><li><p>获取用户列表：<code>GET /2/users/:id/list_memberships</code></p></li><li><p>更新列表：<code>PUT /2/lists/:id</code></p></li><li><p>创建列表：<code>POST /2/lists</code></p></li><li><p>删除列表：<code>DELETE /2/lists/:id</code></p></li></ul><h3 id="观察结果-4" tabindex="-1">观察结果</h3><ol><li>结构：<code>/version / resource /action</code>。</li><li>Twitter 的 API 结构也很标准，版本号放在最前面。</li><li>对于 resource 的命名用复数</li><li>使用下划线 <code>_</code> 作为分隔符</li></ol><h2 id="stripe" tabindex="-1">Stripe</h2><ul><li>API 文档地址：<a href="https://stripe.com/docs/api" target="_blank" rel="noopener noreferrer">Stripe API</a></li><li>API 域名：<code>https://api.stripe.com</code></li></ul><p><strong>API 示例</strong></p><ul><li><p>获取余额：<code>GET /v1/balance</code></p></li><li><p>获取余额交易列表：<code>GET /v1/balance_transactions</code></p></li><li><p>获取余额交易：<code>GET /v1/balance_transactions/:id</code></p></li><li><p>创建客户：<code>POST /v1/customers</code></p></li><li><p>获取客户列表：<code>GET /v1/customers</code></p></li><li><p>更新客户：<code>POST /v1/customers/:id</code></p></li><li><p>获取客户详情：<code>GET /v1/customers/:id</code></p></li><li><p>删除客户：<code>DELETE /v1/customers/:id</code></p></li><li><p>搜索客户：<code>GET /v1/customers/search</code></p></li><li><p>创建支付方式：<code>POST /v1/payment_methods</code></p></li><li><p>获取支付方式详情：<code>GET /v1/payment_methods/:id</code></p></li><li><p>获取客户支付方式：<code>GET /v1/customers/:id/payment_methods/:id</code></p></li><li><p>创建支付意图：<code>POST /v1/payment_intents</code></p></li><li><p>获取支付意图详情：<code>GET /v1/payment_intents/:id</code></p></li></ul><h3 id="观察结果-5" tabindex="-1">观察结果</h3><ul><li>结构：<code>/version/resource/id/action</code></li><li>其更新操作用了 <code>POST</code> 而不是 <code>PUT 方法</code></li><li>对于子资源的区分，使用下划线 <code>_</code> 作为分隔符。(PS：感觉使用 namespace + subresource 的形式区分子资源会更好一些，即 <code>GET /v1/payment/methods/:id</code>， <code>GET /v1/payment/intents</code> 这样。)</li><li>所有 POST 请求，通过 <code>Idempotency-Key</code> 请求头来实现幂等。</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">curl</span> https://api.stripe.com/v1/customers <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-u</span> sk_test_Ou1w6LVt3zmVipDVJsvMeQsc: <span class="token punctuation">\</span></span>
<span class="line">  <span class="token parameter variable">-H</span> <span class="token string">&quot;Idempotency-Key: KG5LxwFBepaKHyUD&quot;</span> <span class="token punctuation">\</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="trello" tabindex="-1">Trello</h2><ul><li>API 文档地址：<a href="https://developer.atlassian.com/cloud/trello/rest/" target="_blank" rel="noopener noreferrer">Trello API</a></li><li>API 域名：<code>https://api.trello.com</code></li></ul><p><strong>API 示例</strong></p><ul><li><p>获取 Action详情：<code>GET /1/actions/{id}</code></p></li><li><p>获取 Action 卡片：<code>GET /1/actions/{id}/card</code></p></li><li><p>获取 Action 看板：<code>GET /1/actions/{id}/board</code></p></li><li><p>更新 Action 文本：<code>PUT /1/actions/{id}/text</code></p></li><li><p>创建 Action 的回应：<code>POST /1/actions/{idAction}/reactions</code></p></li><li><p>获取 Action 的回应：<code>GET /1/actions/{idAction}/reactions/{id}</code></p></li><li><p>删除 Action 的回应：<code>DELETE /1/actions/{idAction}/reactions/{id}</code></p></li><li><p>创建卡片：<code>POST /1/cards</code></p></li><li><p>获取卡片详情：<code>GET /1/cards/{id}</code></p></li><li><p>更新卡片：<code>PUT /1/cards/{id}</code></p></li><li><p>删除卡片：<code>DEL /1/cards/{id}</code></p></li><li><p>获取卡片特定属性：<code>GET /1/cards/{id}/{field}</code></p></li><li><p>获取卡片附件：<code>GET /1/cards/{id}/attachments</code></p></li><li><p>创建卡片附件：<code>POST /1/cards/{id}/attachments</code></p></li><li><p>获取卡片附件：<code>GET /1/cards/{id}/attachments/{idAttachment}</code></p></li><li><p>删除卡片附件：<code>DEL /1/cards/{id}/attachments/{idAttachment}</code></p></li></ul><h3 id="观察结果-6" tabindex="-1">观察结果</h3><ol><li>结构：<code>/version/resource/{id}/subResource/{subId}</code></li><li>非常标准的 Restful API 实现，中规中矩，<strong>I like it ！</strong></li></ol><h2 id="tencent" tabindex="-1">Tencent</h2><h3 id="微信公众号" tabindex="-1">微信公众号</h3><ul><li>API 文档地址：<a href="https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Overview.html" target="_blank" rel="noopener noreferrer">微信公众号 API</a></li><li>域名： <ul><li>主域名：<code>api.weixin.qq.com</code></li><li>灾备域名：<code>api2.weixin.qq.com</code></li></ul></li><li>区域域名：<code>sh.api.weixin.qq.com</code>, <code>sz.api.weixin.qq.com</code>, <code>hk.api.weixin.qq.com</code></li></ul><p><strong>API 示例</strong></p><ul><li><p>获取用户列表：<code>GET /cgi-bin/user/get</code></p></li><li><p>获取用户信息：<code>GET /cgi-bin/user/info</code></p></li><li><p>设置用户备注：<code>POST /cgi-bin/user/info/updateremark</code></p></li><li><p>查询卡劵：<code>POST /cgi-bin/card/code/get</code></p></li><li><p>核销卡劵：<code>POST /cgi-bin/card/code/consume</code></p></li><li><p>新增永久素材：<code>POST /cgi-bin/material/add_material</code></p></li><li><p>获取永久素材：<code>POST /cgi-bin/material/get_material</code></p></li><li><p>删除永久素材：<code>POST /cgi-bin/material/del_material</code></p></li><li><p>获取素材总数：<code>GET /cgi-bin/material/get_materialcount</code></p></li><li><p>获取素材列表：<code>POST /cgi-bin/material/batchget_material</code></p></li></ul><h3 id="微信支付" tabindex="-1">微信支付</h3><ul><li>API 文档地址：<a href="https://pay.weixin.qq.com/docs/merchant/products/jsapi-payment/introduction.html" target="_blank" rel="noopener noreferrer">微信支付 API</a></li><li>域名：<code>api.mch.weixin.qq.com</code>，备域名：<code>api2.mch.weixin.qq.com</code></li></ul><p><strong>API 示例</strong></p><ul><li><p>app 下单：<code>POST /v3/pay/transactions/app</code></p></li><li><p>h5 下单：<code>POST /v3/pay/transactions/h5</code></p></li><li><p>小程序下单：<code>POST /v3/pay/transactions/jsapi</code></p></li><li><p>查询订单：<code>GET /v3/pay/transactions/out-trade-no/{out_trade_no}</code></p></li><li><p>关闭订单：<code>POST /v3/pay/transactions/out-trade-no/{out_trade_no}/close</code></p></li><li><p>申请退款：<code>POST /v3/refund/domestic/refunds</code></p></li><li><p>创建支付分订单：<code>POST /v3/payscore/serviceorder</code></p></li><li><p>查询支付分订单：<code>GET /v3/payscore/serviceorder/</code></p></li><li><p>取消支付分订单：<code>POST /v3/payscore/serviceorder/{out_order_no}/cancel</code></p></li><li><p>核销用户券：<code>POST /v3/marketing/busifavor/coupons/use</code></p></li></ul><h3 id="腾讯开放平台" tabindex="-1">腾讯开放平台</h3><ul><li>API 文档地址：<a href="https://open.tencent.com/" target="_blank" rel="noopener noreferrer">腾讯开放平台 API</a></li><li>域名：<code>graph.qq.com</code></li></ul><p><strong>API 示例</strong></p><ul><li>获取 QQ 用户信息：<code>GET /user/get_user_info</code></li></ul><h3 id="腾讯云" tabindex="-1">腾讯云</h3><ul><li>API 文档地址：<a href="https://cloud.tencent.com/document/api" target="_blank" rel="noopener noreferrer">腾讯云 API</a></li><li>域名：<code>cvm.tencentcloudapi.com</code></li></ul><p><strong>API 实例</strong></p><p>腾讯云的 API 文档没有 API 路径，所有操作都是通过请求 body 或者 params 里的 <code>Action</code> 来区分。</p><ul><li>启动实例：<code>GET https://cvm.tencentcloudapi.com/?Action=StartInstances</code></li><li>关闭实例：<code>GET https://cvm.tencentcloudapi.com/?Action=StopInstances</code></li></ul><h3 id="观察结果-7" tabindex="-1">观察结果</h3><ol><li><p>有多个域名，用于不同的产品线。</p></li><li><p>微信、QQ 的 API 风格差不多基本都是 /resource/action 的方式</p></li><li><p>腾讯云的 API 没有 URL，全部是直接请求域名即可。通过请求 body 或者 params 里的 <code>Action</code> 来区分。（PS：不清楚这样设计的目的是什么，个人觉得还是使用 URL 来区分比较好）</p></li></ol><h2 id="总结" tabindex="-1">总结</h2><ul><li>大部分都符合 Restful API 的设计，围绕 resource 和 action 来设计，增删改成使用对应的 HTTP 方法。</li><li>结构大部分使用 <code>/version/resource/{id}/action</code> 这种形式。</li><li>资源命名使用复数；用动词或者动词短语表示操作（action）。</li><li>对于多个单词的标识符使用中划线 <code>-</code> 或者下划线 <code>_</code> 作为分隔符，也有驼峰命名法。</li><li>AWS 和 腾讯云的 API 设计比较特殊，没有使用 URL 来区分不同的资源，而是使用 <strong>Action</strong> 字段区分。</li></ul><p>最后，个人更喜欢中划线 <code>-</code> 作为分隔符，无论在命令行还是浏览器里，更容易识别，然后我目前的 API 设计和 Trello 的 API 设计比较相似。</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/zouyingjie/arch-notes/edit/main/docs/common-design/api-design/webapi.md" aria-label="在GitHub中编辑" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->在GitHub中编辑<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: yingjiezou1@gmail.com">zouyingjie</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/common-design/api-design/rest.html" aria-label="REST API 设计最佳实践"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>REST API 设计最佳实践</span></div></a><a class="route-link auto-link next" href="/common-design/api-design/swagger.html" aria-label="实践：Spring Boot 集成 Swagger"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>实践：Spring Boot 集成 Swagger</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D-gFUe8_.js" defer></script>
  </body>
</html>
